<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Center</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #0d1117; --card: #161b22; --accent: #58a6ff; --text: #c9d1d9; --green: #238636; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; }
        .tabs { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 15px; padding-bottom: 5px; }
        .tab-btn { white-space: nowrap; padding: 8px 15px; background: #21262d; border: 1px solid #30363d; color: #8b949e; border-radius: 6px; cursor: pointer; }
        .tab-btn.active { background: var(--card); color: var(--accent); border-color: var(--accent); }
        .content { display: none; background: var(--card); padding: 15px; border-radius: 8px; border: 1px solid #30363d; animation: fadeIn 0.3s; }
        .content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        textarea, input { width: 100%; background: #0d1117; color: #fff; border: 1px solid #30363d; padding: 10px; border-radius: 6px; box-sizing: border-box; margin-bottom: 10px; }
        button.main-btn { width: 100%; padding: 12px; background: var(--green); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; }
        .status-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .stat-box { background: #21262d; padding: 10px; border-radius: 6px; text-align: center; font-size: 12px; }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('notes')">üìù –ù–æ—Ç–∞—Ç–∫–∏</button>
        <button class="tab-btn" onclick="openTab('timer')">‚è≥ –¢–∞–π–º–µ—Ä–∏</button>
        <button class="tab-btn" onclick="openTab('remind')">üîî –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è</button>
        <button class="tab-btn" onclick="openTab('system')">üìä –°–∏—Å—Ç–µ–º–∞</button>
    </div>

    <div id="notes" class="content active">
        <h3>–ù–æ–≤–∏–π –∑–∞–ø–∏—Å</h3>
        <textarea id="noteText" placeholder="–¢–µ–∫—Å—Ç –Ω–æ—Ç–∞—Ç–∫–∏..."></textarea>
        <button class="main-btn" onclick="sendToBot('note')">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>

    <div id="timer" class="content">
        <h3>–ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫</h3>
        <input type="time" id="timerTime">
        <input type="text" id="timerTask" placeholder="–ù–∞–∑–≤–∞ –∑–∞–≤–¥–∞–Ω–Ω—è">
        <button class="main-btn" onclick="sendToBot('timer')">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
    </div>

    <div id="remind" class="content">
        <h3>–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è</h3>
        <input type="datetime-local" id="remindTime">
        <textarea id="remindText" placeholder="–ü—Ä–æ —â–æ –Ω–∞–≥–∞–¥–∞—Ç–∏?"></textarea>
        <button class="main-btn" onclick="sendToBot('remind')">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
    </div>

    <div id="system" class="content">
        <h3>–°—Ç–∞–Ω Android</h3>
        <canvas id="ramChart"></canvas>
        <div class="status-grid">
            <div class="stat-box">CPU: <span id="cpuVal">--</span>%</div>
            <div class="stat-box">RAM: <span id="ramVal">--</span>%</div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function openTab(name) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(name).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function sendToBot(type) {
            let data = { type: type };
            if (type === 'note') data.val = document.getElementById('noteText').value;
            if (type === 'timer') data.val = { time: document.getElementById('timerTime').value, task: document.getElementById('timerTask').value };
            if (type === 'remind') data.val = { time: document.getElementById('remindTime').value, text: document.getElementById('remindText').value };
            
            tg.sendData(JSON.stringify(data));
            tg.close();
        }

        // –ì—Ä–∞—Ñ—ñ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (—ñ–º—ñ—Ç–∞—Ü—ñ—è –¥–ª—è –≤—ñ–∑—É–≤–∞–ª—É)
        const ctx = document.getElementById('ramChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['5—Å', '4—Å', '3—Å', '2—Å', '1—Å', '0—Å'],
                datasets: [{ label: '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è %', data: [30, 45, 38, 55, 42, 48], borderColor: '#58a6ff', tension: 0.4 }]
            }
        });
    </script>
</body>
</html>
